# éƒ¨ç½²å®‰å…¨æ£€æŸ¥æ¸…å•

## ğŸ”’ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‰å®‰å…¨æ£€æŸ¥

### 1. ç¯å¢ƒå˜é‡å®‰å…¨

#### å¿…é¡»æ›´æ”¹çš„é»˜è®¤å€¼

- [ ] `JWT_SECRET` - ä½¿ç”¨256ä½å¼ºéšæœºå¯†é’¥
- [ ] `DATABASE_URL` - ä½¿ç”¨å¼ºå¯†ç çš„æ•°æ®åº“è¿æ¥
- [ ] `OSS_ACCESS_KEY_SECRET` - é˜¿é‡Œäº‘OSSå¯†é’¥
- [ ] `REDIS_PASSWORD` - Redisè®¿é—®å¯†ç 

#### å®‰å…¨é…ç½®éªŒè¯

```bash
# æ£€æŸ¥JWTå¯†é’¥é•¿åº¦ï¼ˆè‡³å°‘32å­—ç¬¦ï¼‰
echo $JWT_SECRET | wc -c

# éªŒè¯æ•°æ®åº“è¿æ¥å®‰å…¨æ€§
# ç¡®ä¿ä½¿ç”¨SSLè¿æ¥ï¼šDATABASE_URL="mysql://user:pass@host:3306/db?sslmode=require"

# æ£€æŸ¥Rediså¯†ç è®¾ç½®
redis-cli -h $REDIS_HOST -p $REDIS_PORT auth $REDIS_PASSWORD
```

### 2. æ•°æ®åº“å®‰å…¨

#### æ•°æ®åº“é…ç½®æ£€æŸ¥

- [ ] æ•°æ®åº“ç”¨æˆ·æƒé™æœ€å°åŒ–
- [ ] å¯ç”¨SSL/TLSè¿æ¥
- [ ] å®šæœŸå¤‡ä»½ç­–ç•¥å·²é…ç½®
- [ ] æ•°æ®åº“è®¿é—®IPç™½åå•å·²è®¾ç½®

#### æ•°æ®å®‰å…¨éªŒè¯

```sql
-- æ£€æŸ¥æ•æ„Ÿæ•°æ®åŠ å¯†
SELECT COUNT(*) FROM accounts WHERE password NOT LIKE '$2b$%';  -- åº”è¯¥è¿”å›0

-- éªŒè¯ç´¢å¼•ä¼˜åŒ–
SHOW INDEX FROM accounts;
SHOW INDEX FROM logs;

-- æ£€æŸ¥æ•°æ®å®Œæ•´æ€§
SELECT COUNT(*) FROM accounts WHERE status IS NULL;  -- åº”è¯¥è¿”å›0
```

### 3. ç½‘ç»œå®‰å…¨

#### HTTPSé…ç½®

- [ ] SSLè¯ä¹¦å·²å®‰è£…ä¸”æœ‰æ•ˆ
- [ ] å¼ºåˆ¶HTTPSé‡å®šå‘å·²å¯ç”¨
- [ ] HSTSå¤´å·²é…ç½®
- [ ] è¯ä¹¦è‡ªåŠ¨æ›´æ–°å·²è®¾ç½®

#### é˜²ç«å¢™é…ç½®

```bash
# æ£€æŸ¥å¼€æ”¾ç«¯å£
netstat -tuln | grep LISTEN

# éªŒè¯é˜²ç«å¢™è§„åˆ™
ufw status
# æˆ–
iptables -L

# åº”è¯¥åªå¼€æ”¾å¿…è¦ç«¯å£ï¼š
# - 80/443 (HTTP/HTTPS)
# - 22 (SSH, é™åˆ¶IP)
# - 3306 (MySQL, ä»…å†…ç½‘)
# - 6379 (Redis, ä»…å†…ç½‘)
```

### 4. åº”ç”¨å®‰å…¨

#### ä»£ç å®‰å…¨æ‰«æ

```bash
# ä¾èµ–å®‰å…¨æ‰«æ
npm audit
pnpm audit

# ä¿®å¤é«˜å±æ¼æ´
npm audit fix
pnpm audit --fix

# æ£€æŸ¥è¿‡æœŸä¾èµ–
npm outdated
pnpm outdated
```

#### é…ç½®æ–‡ä»¶å®‰å…¨

- [ ] ç§»é™¤å¼€å‘ç¯å¢ƒé…ç½®
- [ ] ç¦ç”¨è°ƒè¯•æ¨¡å¼
- [ ] ç§»é™¤æµ‹è¯•æ•°æ®å’Œè´¦æˆ·
- [ ] æ—¥å¿—çº§åˆ«è®¾ç½®ä¸º `warn` æˆ– `error`

### 5. æ–‡ä»¶ç³»ç»Ÿå®‰å…¨

#### æ–‡ä»¶æƒé™æ£€æŸ¥

```bash
# æ£€æŸ¥åº”ç”¨æ–‡ä»¶æƒé™
find /path/to/app -type f -perm -o+w

# è®¾ç½®æ­£ç¡®çš„æ–‡ä»¶æƒé™
chmod -R 644 /path/to/app
chmod -R 755 /path/to/app/bin
chmod 600 /path/to/app/.env*

# æ£€æŸ¥ä¸Šä¼ ç›®å½•æƒé™
ls -la /path/to/uploads
```

#### æ–‡ä»¶ä¸Šä¼ å®‰å…¨

- [ ] æ–‡ä»¶ç±»å‹ç™½åå•å·²é…ç½®
- [ ] æ–‡ä»¶å¤§å°é™åˆ¶å·²è®¾ç½®
- [ ] æ–‡ä»¶åå®‰å…¨åŒ–å¤„ç†
- [ ] ç—…æ¯’æ‰«æå·²é›†æˆï¼ˆå¯é€‰ï¼‰

### 6. ç›‘æ§å’Œæ—¥å¿—

#### æ—¥å¿—é…ç½®

- [ ] å®‰å…¨äº‹ä»¶æ—¥å¿—å·²å¯ç”¨
- [ ] æ—¥å¿—è½®è½¬å·²é…ç½®
- [ ] æ•æ„Ÿä¿¡æ¯è„±æ•å¤„ç†
- [ ] æ—¥å¿—å­˜å‚¨å®‰å…¨

#### ç›‘æ§é…ç½®

```bash
# æ£€æŸ¥ç³»ç»Ÿèµ„æºç›‘æ§
htop
iostat
netstat -i

# éªŒè¯æ—¥å¿—è®°å½•
tail -f /var/log/app/security.log
tail -f /var/log/nginx/access.log
```

### 7. å¤‡ä»½å’Œæ¢å¤

#### å¤‡ä»½ç­–ç•¥éªŒè¯

- [ ] æ•°æ®åº“è‡ªåŠ¨å¤‡ä»½å·²é…ç½®
- [ ] æ–‡ä»¶å¤‡ä»½å·²é…ç½®
- [ ] å¤‡ä»½åŠ å¯†å·²å¯ç”¨
- [ ] æ¢å¤æµç¨‹å·²æµ‹è¯•

#### å¤‡ä»½æµ‹è¯•

```bash
# æµ‹è¯•æ•°æ®åº“å¤‡ä»½
mysqldump -u $DB_USER -p$DB_PASS $DB_NAME > backup_test.sql

# æµ‹è¯•å¤‡ä»½æ¢å¤
mysql -u $DB_USER -p$DB_PASS $DB_TEST < backup_test.sql

# éªŒè¯å¤‡ä»½å®Œæ•´æ€§
md5sum backup_test.sql
```

### 8. æ€§èƒ½å’Œå¯ç”¨æ€§

#### æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥

- [ ] æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
- [ ] é™æ€èµ„æºCDNé…ç½®
- [ ] ç¼“å­˜ç­–ç•¥å·²å®æ–½
- [ ] å›¾ç‰‡å‹ç¼©å·²å¯ç”¨

#### å¯ç”¨æ€§æµ‹è¯•

```bash
# è´Ÿè½½æµ‹è¯•
ab -n 1000 -c 10 https://yourdomain.com/

# å¥åº·æ£€æŸ¥
curl -f https://yourdomain.com/api/health

# SSLæµ‹è¯•
openssl s_client -connect yourdomain.com:443 -servername yourdomain.com
```

## ğŸš¨ å®‰å…¨äº‹ä»¶å“åº”

### äº‹ä»¶åˆ†ç±»

1. **Critical**: æ•°æ®æ³„éœ²ã€ç³»ç»Ÿå…¥ä¾µ
2. **High**: è®¤è¯ç»•è¿‡ã€æƒé™æå‡
3. **Medium**: å¼‚å¸¸è®¿é—®æ¨¡å¼ã€æš´åŠ›ç ´è§£
4. **Low**: é…ç½®é—®é¢˜ã€æ€§èƒ½å¼‚å¸¸

### å“åº”æµç¨‹

1. **æ£€æµ‹** - ç›‘æ§å‘Šè­¦è§¦å‘
2. **åˆ†æ** - ç¡®å®šäº‹ä»¶ä¸¥é‡ç¨‹åº¦
3. **éåˆ¶** - é˜»æ­¢è¿›ä¸€æ­¥æŸå®³
4. **æ ¹é™¤** - æ¶ˆé™¤å¨èƒæº
5. **æ¢å¤** - æ¢å¤æ­£å¸¸æœåŠ¡
6. **æ€»ç»“** - äº‹ååˆ†æå’Œæ”¹è¿›

### ç´§æ€¥è”ç³»ä¿¡æ¯

```
å®‰å…¨å›¢é˜Ÿ: security@company.com
è¿ç»´å›¢é˜Ÿ: ops@company.com
ç®¡ç†å±‚: management@company.com
```

## ğŸ“‹ éƒ¨ç½²æ£€æŸ¥è¡¨

### éƒ¨ç½²å‰æ£€æŸ¥

- [ ] æ‰€æœ‰å®‰å…¨é…ç½®å·²éªŒè¯
- [ ] ä¾èµ–å®‰å…¨æ‰«æé€šè¿‡
- [ ] ä»£ç å®‰å…¨å®¡æŸ¥å®Œæˆ
- [ ] å¤‡ä»½ç­–ç•¥å·²æµ‹è¯•
- [ ] ç›‘æ§ç³»ç»Ÿå·²é…ç½®
- [ ] åº”æ€¥å“åº”è®¡åˆ’å·²å‡†å¤‡

### éƒ¨ç½²åéªŒè¯

- [ ] åº”ç”¨æ­£å¸¸å¯åŠ¨
- [ ] æ‰€æœ‰APIç«¯ç‚¹å¯è®¿é—®
- [ ] è®¤è¯ç³»ç»Ÿæ­£å¸¸å·¥ä½œ
- [ ] æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½æ­£å¸¸
- [ ] æ—¥å¿—è®°å½•æ­£å¸¸
- [ ] ç›‘æ§å‘Šè­¦æ­£å¸¸

### æŒç»­å®‰å…¨ç»´æŠ¤

- [ ] å®šæœŸå®‰å…¨æ‰«æï¼ˆæ¯å‘¨ï¼‰
- [ ] ä¾èµ–æ›´æ–°æ£€æŸ¥ï¼ˆæ¯æœˆï¼‰
- [ ] å®‰å…¨æ—¥å¿—å®¡æŸ¥ï¼ˆæ¯æ—¥ï¼‰
- [ ] å¤‡ä»½éªŒè¯æµ‹è¯•ï¼ˆæ¯æœˆï¼‰
- [ ] åº”æ€¥å“åº”æ¼”ç»ƒï¼ˆæ¯å­£åº¦ï¼‰

---

**æœ€åæ›´æ–°**: 2024å¹´12æœˆ24æ—¥  
**æ£€æŸ¥è€…**: ******\_\_\_\_******  
**éƒ¨ç½²æ—¥æœŸ**: ******\_\_\_\_******  
**ä¸‹æ¬¡æ£€æŸ¥**: ******\_\_\_\_******
